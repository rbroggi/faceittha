name: CI

on: [push]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: changing key file permission
      run: chmod 400 db/config/keyfile
    - name: changing ownership as well
      run: chown 999:999 db/config/keyfile
    - name: running CI
      run: docker-compose up
    - name: Dump docker logs on failure
      if: failure()
      uses: jwalton/gh-docker-logs@v2